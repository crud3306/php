
减少http请求次数  
---------
  
  
为什么要减少http请求  
---------
性能黄金法则：  
只有10%-20%的最终用户响应时间花在接收请求的html文档上，剩下的80%-90%时间花在html文档所引用的所有组件(image，script，css，flash等等)进行的http请求上。  
也就是说我们在接收html文档的请求时间其实并没有多少，只有10%-20%，剩下的80%-90%时间都花上了所请求的html文档中所引用的image\js\css等组件上。  
   
   
如何改善？  
---------
改善响应时间的最简单途径就是减少组件的数量，并由此减少http请求的数量。  
  
http连接产生的开销  
域名解析 - tcp连接 - 发送请求 - 等待 - 下载资源 - 解析时间   
  
疑问：  
dns缓存   
http1.1默认以keep-alive来进行操作的，也就是说在这当中我们不会花费tcp握手的时间。  
  
回答疑问：  
查找dns缓存也需要时间，多个缓存就要查找多次，有可能缓存会被清除  
http1.1协义规定请求只能串行发送，也就是说一百个请求必须依次逐个发送，前面的一个请求完成才能开始下个请求。所以它还是会浪费一定时间。  
  
  
    
减少http请求的方式    
------------
  
1 合并图片  
  
对于合并的图片，前端两种处理方式：  
其实说白了，就是把多张图片合并为一张图片，然后以图片位置信息来定位要显示的图片。比如多个icon合并在一个图片中。  
  
1) 图片地图：    
图片地图允许你在一个图片上关联多个url，目标url的选择取决于用户单击了图片上的哪个位置。  
使用<map><area></area></map>标签  
  
2) css精录：  
css Sprites中文翻译为css精灵，对于使用的合并图片，通过指定css的backgroud-image与background-position来显示元素    
  
  
2 合并js脚本和css样式等  
即：把多个脚本合并为一个脚本，把多个样式表合并为一个样式表  
大量总结：独立的一个js比用多个js文件组成的页面载入要快38%  
  
  
3 图片使用base64编码减少页面请求数   
采用base64的编码方式将图片直接嵌入到网页中，而不是从外部载入  
<img src="data:image/gif;base64,/9j/4AAQSKZJ...." />  
  
  




















































